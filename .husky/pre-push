#!/usr/bin/env sh

echo "ğŸ§ª Running tests before push..."
echo ""

# Run TypeScript type check
echo "ğŸ“ TypeScript type check..."
pnpm run typecheck || {
    echo ""
    echo "âŒ TypeScript errors found. Fix them before pushing."
    exit 1
}

# Run unit tests
echo ""
echo "ğŸ§ª Running unit tests..."
pnpm run test:unit || {
    echo ""
    echo "âŒ Unit tests failed. Fix them before pushing."
    exit 1
}

# Run infrastructure tests
echo ""
echo "ğŸ”§ Running infrastructure tests..."
pnpm run test:infrastructure || {
    echo ""
    echo "âŒ Infrastructure tests failed. Fix them before pushing."
    exit 1
}

echo ""
echo "âœ… All tests passed! Pushing to remote..."
